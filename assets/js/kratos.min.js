/*!
 * Kratos
 * Seaton Jiang <seaton@vtrois.com> and Virace <Virace@aliyun.com>
 */
function loadScripts(t,e){return new Promise((function(o){t.forEach((function(n,a){let s=document.createElement("script");s.type="text/javascript",s.src=(e||"")+n,s.async=!1,a===t.length-1&&(s.onreadystatechange=o,s.onload=o),document.body.appendChild(s)}))}))}function grin(t){let e,o;if(t=" "+t+" ",!document.getElementById("comment")||"textarea"!==document.getElementById("comment").type)return!1;if(e=document.getElementById("comment"),document.selection)e.focus(),o=document.selection.createRange(),o.text=t,e.focus();else if(e.selectionStart||"0"===e.selectionStart){const o=e.selectionStart,n=e.selectionEnd;let a=n;e.value=e.value.substring(0,o)+t+e.value.substring(n,e.value.length),a+=t.length,e.focus(),e.selectionStart=a,e.selectionEnd=a}else e.value+=t,e.focus()}!function(){"use strict";const t=function(){$((function(){$('[data-toggle="tooltip"]').tooltip()}))},e=function(){let t=$(".wechat");t.mouseout((function(){$(".wechat-pic")[0].style.display="none"})),t.mouseover((function(){$(".wechat-pic")[0].style.display="block"}))},o=function(){$("#addsmile").on("click",(function(t){return $(".smile").toggleClass("open"),$(document).one("click",(function(){$(".smile").toggleClass("open")})),t.stopPropagation(),!1}))},n=function(){$.fn.postLike=function(){if($(this).hasClass("done"))return layer.msg(kratos.repeat,(function(){})),!1;$(this).addClass("done"),layer.msg(kratos.thanks);var t={action:"love",um_id:$(this).data("id"),um_action:$(this).data("action")};return $.post(kratos.site+"/wp-admin/admin-ajax.php",t,(function(t){})),!1},$(document).on("click",".btn-thumbs",(function(){$(this).postLike()}))},a=function(){$("#donate").on("click",(function(){layer.open({type:1,area:["300px","370px"],title:kratos.donate,resize:!1,scrollbar:!1,content:'<div class="donate-box"><div class="meta-pay text-center my-2"><strong>'+kratos.scan+'</strong></div><div class="qr-pay text-center"><img class="pay-img" id="alipay_qr" src="'+kratos.alipay+'"><img class="pay-img d-none" id="wechat_qr" src="'+kratos.wechat+'"></div><div class="choose-pay text-center mt-2"><input id="alipay" type="radio" name="pay-method" checked><label for="alipay" class="pay-button"><img src="'+kratos.directory+'/assets/img/payment/alipay.png"></label><input id="wechatpay" type="radio" name="pay-method"><label for="wechatpay" class="pay-button"><img src="'+kratos.directory+'/assets/img/payment/wechat.png"></label></div></div>'}),$(".choose-pay input[type='radio']").click((function(){const t=$(this).attr("id");"alipay"===t&&($(".qr-pay #alipay_qr").removeClass("d-none"),$(".qr-pay #wechat_qr").addClass("d-none")),"wechatpay"===t&&($(".qr-pay #alipay_qr").addClass("d-none"),$(".qr-pay #wechat_qr").removeClass("d-none"))}))}))},s=function(){layer.photos({photos:".article .content .wp-block-image",anim:0})},i=function(t){function e(){document.querySelectorAll("pre code").forEach(t=>{hljs.highlightBlock(t),hljs.lineNumbersBlock(t),hljs.addCopyButton(t)})}if($("pre code").length>=1)if("undefined"==typeof hljs){$("head").append('<link href="'+kratos.directory+'/assets/css/highlight/style.min.css" rel="stylesheet" type="text/css" />'),loadScripts([kratos.directory+"/assets/js/highlight/highlight.pack.js",kratos.directory+"/assets/js/highlight/highlightjs-copy-button.min.js",kratos.directory+"/assets/js/highlight/highlightjs-line-numbers.min.js"],"").then(e)}else e()};window.pjax_reload=function(){t(),e(),o(),n(),a(),i(),s()},$((function(){$(document).on("click",".acheader",(function(t){const e=$(this);e.closest(".accordion").find(".contents").slideToggle(300),e.closest(".accordion").hasClass("active")?e.closest(".accordion").removeClass("active"):e.closest(".accordion").addClass("active"),t.preventDefault()})),function(){function t(){const t=window.scrollY,e=$(".k-nav.navbar"),o=$(".dropdown-menu");t>0?(e.addClass("navbar-scrolled"),o.addClass("navbar-scrolled")):(e.removeClass("navbar-scrolled"),o.removeClass("navbar-scrolled"))}$(window).scroll((function(){t()})),$(document).ready((function(){t()})),$(".auto-hiding-navbar").autoHidingNavbar({animationDuration:500,showOnBottom:!1,showOnUpscroll:!0});const e=$(".dropdown"),o=$(".dropdown-toggle"),n=$(".dropdown-menu"),a="show";$(window).on("load resize",(function(){if(this.matchMedia("(min-width: 992px)").matches){e.hover((function(){const t=$(this);t.addClass(a),t.find(o).attr("aria-expanded","true"),t.find(n).addClass(a)}),(function(){const t=$(this);t.removeClass(a),t.find(o).attr("aria-expanded","false"),t.find(n).removeClass(a)}));let t=$(".navbar")[0].offsetHeight+75;$("body").scrollspy({target:"#toc",offset:t})}else e.off("mouseenter mouseleave")}));const s=$("#navbarResponsive").clone();s.removeAttr("id"),s.attr({class:"mobi-navbar"}),s.find("*").removeAttr("id"),s.find("*:not(.dropdown)").removeAttr("class"),s.find("*").removeAttr("role"),s.find("*").removeAttr("aria-current"),s.find("*").removeAttr("aria-haspopup"),s.find("*").removeAttr("aria-expanded"),s.find("*").removeAttr("data-toggle"),s.find("*").removeAttr("aria-labelledby"),s.find("> ul").attr({class:"mobi-menu"}),s.find("li > ul").attr({class:"mobi-menu-sub"}),s.find(".dropdown").attr({class:"dropdown"}),$("header.k-header").prepend(s),function(){const t=$(".mobi-navbar li.dropdown");for(let e=0;e<t.length;e++){const o=$(t[e]);0===o.find(".m-dropdown").length&&o.append('<div class="m-dropdown"><span class="vicon i-down"></span></div>')}}(),$("#navbutton").on("click",(function(t){$("body").toggleClass("menu-on"),0===$(".navbar-on-shadow").length&&$("#content").append('<div class="navbar-on-shadow"></div>')})),$(".m-dropdown").on("click",(function(t){const e=$(this).parent();e.find("> .mobi-menu-sub").slideToggle("fast"),e.toggleClass("menu-open")})),$("body").on("click",".navbar-on-shadow",(function(){$("#navbutton").trigger("click")})),$(".mobi-menu").on("click","a",(function(){$("#navbutton").trigger("click")}))}(),t(),$(window).on("load",(function(){const t=$(window);t.scrollTop()>200?$(".gotop").addClass("active"):$(".gotop").removeClass("active"),t.scroll((function(){t.scrollTop()>200?$(".gotop").addClass("active"):$(".gotop").removeClass("active")}))})),$(".gotop").on("click",(function(t){return t.preventDefault(),$("html, body").animate({scrollTop:$("html").offset().top},500),!1})),$(".search").on("click",(function(t){$(".search-form").animate({width:"200px"},200),$(".search-form input").css("display","block"),$(document).one("click",(function(){$(".search-form").animate({width:"0"},100),$(".search-form input").hide()})),t.stopPropagation()})),$(".search-form").on("click",(function(t){t.stopPropagation()})),e(),o(),n(),a(),console.log("\n Kratos-pe v1.0.0-rc\n\n https://github.com/Virace/kratos-pe \n\n"),s(),i()}))}(),document.addEventListener("DOMContentLoaded",(function(t){const e=new Event("cloneDOMContentLoaded");document.dispatchEvent(e)})),AOS.init({disable:"mobile",startEvent:"cloneDOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:40,delay:0,duration:1e3,easing:"ease-in-out",once:!1,mirror:!1,anchorPlacement:"top-bottom"}),$("body").on("click",'a[href^="#toc"],area[href^="#toc"]',(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){let t=$(this.hash),e=$(".navbar")[0].offsetHeight;if(t=t.length&&t||$("[name="+this.hash.slice(1)+"]"),t.length){const o=t.offset().top;return $("html,body").animate({scrollTop:o-e-5},1e3),!1}}}));