jQuery(document).ready(function(a){function b(b,f){var g=a(".uploaded-file"),h=a(this);e=f,b.preventDefault(),d?d.open():(d=wp.media.frames.optionsframework_upload=wp.media({title:h.data("choose"),button:{text:h.data("update"),close:!1}}),d.on("select",function(){var b=d.state().get("selection").first();d.close(),e.find(".upload").val(b.attributes.url),"image"==b.attributes.type&&e.find(".screenshot").empty().hide().append("<img src=\""+b.attributes.url+"\"><a class=\"remove-image\">Remove</a>").slideDown("fast"),e.find(".upload-button").unbind().addClass("remove-file").removeClass("upload-button").val(optionsframework_l10n.remove),e.find(".of-background-properties").slideDown(),e.find(".remove-image, .remove-file").on("click",function(){c(a(this).parents(".section"))})})),d.open()}function c(c){c.find(".remove-image").hide(),c.find(".upload").val(""),c.find(".of-background-properties").hide(),c.find(".screenshot").slideUp(),c.find(".remove-file").unbind().addClass("upload-button").removeClass("remove-file").val(optionsframework_l10n.upload),0<a(".section-upload .upload-notice").length&&a(".upload-button").remove(),c.find(".upload-button").on("click",function(c){b(c,a(this).parents(".section"))})}var d,e;a(".remove-image, .remove-file").on("click",function(){c(a(this).parents(".section"))}),a(".upload-button").click(function(c){b(c,a(this).parents(".section"))})});