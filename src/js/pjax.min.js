/*!
 * Kratos-ajax
 * Virace <Virace@aliyun.com>
 */
const ignore=["data:","/wp-","/rss","/feed","/sitemap.xml","/sitemap.html","#respond","#toc_i-","#toc-","javascript:",".pdf",".zip",".rar",".7z",".jpg",".png",".gif",".bmp","#nav"],selectorContent="section",elements={click:{"*:not(#comments-nav)>a[target!=_blank]":function(t){for(let e in ignore)if(t.indexOf(ignore[e])>=0)return!0;return ajax(t,"pagelink"),!1},"#comments-nav a":function(t){return ajax(t,"comtpagenav"),!1}},submit:{"#searchform":function(){return ajax(this.action+"?s="+$(this).find("#search").val(),"search"),!1}}};for(let t in elements)for(let e in elements[t])$(document).on(t,e,(function(){const n=$(this).attr("href");return!!n&&elements[t][e](n)}));function moveScroll(t,e){const n=$("body,html");$("section").fadeTo("fast",.7),"comtpagenav"===e?n.animate({scrollTop:$("#comments").offset().top-70},400):"pagelink"!==e&&"search"!==e||-1===t.indexOf("#")&&n.animate({scrollTop:$(".k-main").offset().top-$(".k-nav")[0].offsetHeight},400)}function findAll(t,e){return t.filter(e).add(t.find(e))}function parseHTML(t){return $.parseHTML(t,document,!0)}function format(t){return $(parseHTML(t))}function ajax(t,e,n){NProgress.start(),moveScroll(t,e),$.ajax({url:t,type:"GET",data:n,beforeSend:function(){const t=window.document;history.replaceState({url:t.location.href,title:t.title,html:$(document).find("section").html()},t.title,document.location.href)},success:function(n){let o=format(n);const i=findAll(o,"section").html();if(document.title=findAll(o,"title").text(),window.history.pushState({url:t,title:findAll(o,"title").text(),html:i},findAll(o,"title").text(),t),$(".introduce").html(findAll(o,".introduce").html()),"pagelink"===e){$("section").html(i);const t=window.location.hash.substring(location.hash.indexOf("#")+1);t&&$("body,html").animate({scrollTop:$("#"+t).offset().top-61},600);try{$("pre>code").each((function(){hljs.highlightBlock(this)}))}catch(t){}}else"search"===e?($("section").html(i),$("#searchform").animate({width:"0"},200),$("#searchform input").val("")):"comtpagenav"===e&&($("#comments").html(findAll(o,"#comments").html()),$("#comments-nav").html(findAll(o,"#comments-nav").html()));$("section").fadeTo("fast",1),window.load=window.pjax_reload(),NProgress.done()},error:function(e){$("section").fadeTo("fast",1),location.href=t}})}$((function(){window.addEventListener("popstate",(function(t){t.state&&(document.title=t.state.title,$("section").html(t.state.html),window.load=window.pjax_reload())}))}));